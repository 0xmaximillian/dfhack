<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id4">Introduction</a></h1>
<p>DFHack is a Dwarf Fortress memory access library and a set of basic
tools using this library. The library is a work in progress, so things
might change as more tools are written for it.</p>
<p>It is an attempt to unite the various ways tools access DF memory and
allow for easier development of new tools.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id4">Introduction</a></li>
<li><a class="reference internal" href="#getting-dfhack" id="id5">Getting DFHack</a></li>
<li><a class="reference internal" href="#compatibility" id="id6">Compatibility</a><ul>
<li><a class="reference internal" href="#windows" id="id7">Windows</a></li>
<li><a class="reference internal" href="#linux" id="id8">Linux</a><ul>
<li><a class="reference internal" href="#native-linux-df" id="id9">Native linux DF</a></li>
<li><a class="reference internal" href="#windows-df-under-wine" id="id10">Windows DF under wine</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#tools" id="id11">Tools</a><ul>
<li><a class="reference internal" href="#dfattachtest" id="id12">dfattachtest</a></li>
<li><a class="reference internal" href="#dfautodump" id="id13">dfautodump</a><ul>
<li><a class="reference internal" href="#options" id="id14">Options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfcleanmap" id="id15">dfcleanmap</a></li>
<li><a class="reference internal" href="#dfcleanowned" id="id16">dfcleanowned</a><ul>
<li><a class="reference internal" href="#id1" id="id17">Options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfcleartask" id="id18">dfcleartask</a></li>
<li><a class="reference internal" href="#dfderamp-by-zilpin" id="id19">dfderamp (by zilpin)</a></li>
<li><a class="reference internal" href="#dfdoffsets" id="id20">dfdoffsets</a></li>
<li><a class="reference internal" href="#dfexpbench" id="id21">dfexpbench</a></li>
<li><a class="reference internal" href="#dfflows" id="id22">dfflows</a></li>
<li><a class="reference internal" href="#dfincremental" id="id23">dfincremental</a></li>
<li><a class="reference internal" href="#dfgrow" id="id24">dfgrow</a></li>
<li><a class="reference internal" href="#dfimmolate" id="id25">dfimmolate</a><ul>
<li><a class="reference internal" href="#id2" id="id26">Options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfstatus-by-enjia2000" id="id27">dfstatus (by enjia2000)</a></li>
<li><a class="reference internal" href="#dflair" id="id28">dflair</a></li>
<li><a class="reference internal" href="#dfliquids" id="id29">dfliquids</a></li>
<li><a class="reference internal" href="#dfmode" id="id30">dfmode</a></li>
<li><a class="reference internal" href="#dfpause" id="id31">dfpause</a></li>
<li><a class="reference internal" href="#dfposition" id="id32">dfposition</a></li>
<li><a class="reference internal" href="#dfprobe" id="id33">dfprobe</a></li>
<li><a class="reference internal" href="#dfprospector" id="id34">dfprospector</a><ul>
<li><a class="reference internal" href="#id3" id="id35">Options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfreveal" id="id36">dfreveal</a></li>
<li><a class="reference internal" href="#dfunreveal" id="id37">dfunreveal</a></li>
<li><a class="reference internal" href="#dfsuspend" id="id38">dfsuspend</a></li>
<li><a class="reference internal" href="#dftubefill" id="id39">dftubefill</a></li>
<li><a class="reference internal" href="#dfunstuck" id="id40">dfunstuck</a></li>
<li><a class="reference internal" href="#dfvdig" id="id41">dfvdig</a></li>
<li><a class="reference internal" href="#dfveinlook" id="id42">dfveinlook</a></li>
<li><a class="reference internal" href="#dfweather" id="id43">dfweather</a></li>
<li><a class="reference internal" href="#your-tool-here" id="id44">Your tool here</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="getting-dfhack">
<h1><a class="toc-backref" href="#id5">Getting DFHack</a></h1>
<p>The project is currently hosted on <a class="reference external" href="http://www.github.com/">github</a>, for both source and
binaries at  <a class="reference external" href="http://github.com/peterix/dfhack">http://github.com/peterix/dfhack</a></p>
</div>
<div class="section" id="compatibility">
<h1><a class="toc-backref" href="#id6">Compatibility</a></h1>
<p>DFHack works on Windows XP, Vista, 7 or any modern Linux distribution.
OSX is not supported due to lack of developers with a Mac.</p>
<p>In general, the older DF release you use, the less features will work.
DFHack development is always focused on the latest DF version. Go too
far into the past, and only the most basic tools will work.</p>
<div class="section" id="windows">
<h2><a class="toc-backref" href="#id7">Windows</a></h2>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Windows 2000 is currently <em>not supported</em> due to missing OS
functionality. If you know how to easily suspend processes, you can
fix it :)</p>
</div>
<p>0.31.01 - 0.31.03 legacy</p>
<p>0.31.04 - 0.31.25 SDL</p>
</div>
<div class="section" id="linux">
<h2><a class="toc-backref" href="#id8">Linux</a></h2>
<div class="section" id="native-linux-df">
<h3><a class="toc-backref" href="#id9">Native linux DF</a></h3>
<p>0.31.05 - 0.31.24: spotty support (some things might not work)</p>
<p>0.31.25: full support</p>
</div>
<div class="section" id="windows-df-under-wine">
<h3><a class="toc-backref" href="#id10">Windows DF under wine</a></h3>
<p>0.31.01 - 0.31.03 legacy</p>
<p>0.31.04 - 0.31.25 SDL</p>
</div>
</div>
</div>
<div class="section" id="tools">
<h1><a class="toc-backref" href="#id11">Tools</a></h1>
<p>All the DFHack tools are terminal programs. This might seem strange to Windows
users, but these are meant mostly as examples for developers. Still, they can
be useful and are cross-platform just like the library itself.</p>
<div class="section" id="dfattachtest">
<h2><a class="toc-backref" href="#id12">dfattachtest</a></h2>
<p>Test of the process attach/detach mechanism.</p>
</div>
<div class="section" id="dfautodump">
<h2><a class="toc-backref" href="#id13">dfautodump</a></h2>
<p>Automated item dumping tool. All loose items on the floor marked
for dumping are insta-dumped to the position of the in-game cursor.</p>
<p>Cursor must be placed on a floor tile. Instadumped items may not
show up in the cursor description list until you save/reload.</p>
<div class="section" id="options">
<h3><a class="toc-backref" href="#id14">Options:</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-d</span></kbd></td>
<td>Destroy instead of dumping. Doesn't require a cursor.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="dfcleanmap">
<h2><a class="toc-backref" href="#id15">dfcleanmap</a></h2>
<p>Cleans all the splatter that get scattered all over the map.
Only exception is mud. It leaves mud alone.</p>
</div>
<div class="section" id="dfcleanowned">
<h2><a class="toc-backref" href="#id16">dfcleanowned</a></h2>
<p>Removes the ownership flag from items.
By default, owned food on the floor and rotten items are confistacted and dumped.</p>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id17">Options:</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-a</span></kbd></td>
<td>confiscate all owned items</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-l</span></kbd></td>
<td>confiscated and dump all items scattered on the floor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-x</span></kbd></td>
<td>confiscate/dump items with wear level 'x' and more</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-X</span></kbd></td>
<td>confiscate/dump items with wear level 'X' and more</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-d</span></kbd></td>
<td>a dry run. combine with other options to see what will happen without it actually happening.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>On Windows:</dt>
<dd><ul class="first last simple">
<li>dfremovelitter.bat runs the tool with -lx</li>
<li>dfconfiscate.bat runs the tool with -a</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="dfcleartask">
<h2><a class="toc-backref" href="#id18">dfcleartask</a></h2>
<p>Items marked for a job can get stuck during a abandon/reclaim. This tool aims to fix that.
Best used immediately after a reclaim. Not thoroughly tested, use at your own risk.</p>
</div>
<div class="section" id="dfderamp-by-zilpin">
<h2><a class="toc-backref" href="#id19">dfderamp (by zilpin)</a></h2>
<p>Removes all ramps designated for removal from the map. This is useful for replicating the old channel digging designation.
It also removes any and all 'down ramps' that can remain after a cave-in (you don't have to designate anything for that to happen).</p>
</div>
<div class="section" id="dfdoffsets">
<h2><a class="toc-backref" href="#id20">dfdoffsets</a></h2>
<p>Dumps the offsets for the currently running DF version into the terminal.</p>
</div>
<div class="section" id="dfexpbench">
<h2><a class="toc-backref" href="#id21">dfexpbench</a></h2>
<p>Just a simple benchmark of the data export speed.</p>
</div>
<div class="section" id="dfflows">
<h2><a class="toc-backref" href="#id22">dfflows</a></h2>
<p>A tool for checking how many liquid tiles are actively checked for flows.</p>
</div>
<div class="section" id="dfincremental">
<h2><a class="toc-backref" href="#id23">dfincremental</a></h2>
<p>A simple memory search tool for DF. Requires arcane knowledge ;)</p>
</div>
<div class="section" id="dfgrow">
<h2><a class="toc-backref" href="#id24">dfgrow</a></h2>
<p>Makes all saplings present on the map grow into trees (almost) instantly.</p>
</div>
<div class="section" id="dfimmolate">
<h2><a class="toc-backref" href="#id25">dfimmolate</a></h2>
<p>A tool for getting rid of trees and shrubs. By default, it only kills a tree/shrub under the cursor.</p>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id26">Options:</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-s</span></kbd></td>
<td>affect all shrubs on the map</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-t</span></kbd></td>
<td>affect all trees on the map</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-i</span></kbd></td>
<td>instead of just instaburning plants to ashes, produce fire. WILL KILL FPS!</td></tr>
</tbody>
</table>
<p>The windows binary releases contain many .bat files that can run the tool with different parameters.</p>
</div>
</div>
<div class="section" id="dfstatus-by-enjia2000">
<h2><a class="toc-backref" href="#id27">dfstatus (by enjia2000)</a></h2>
<p>Runs next to DF and shows some vital statistics of the fort, including food and booze.</p>
</div>
<div class="section" id="dflair">
<h2><a class="toc-backref" href="#id28">dflair</a></h2>
<p>Marks all of the map as a lair, preventing item scatter on abandon/reclaim.</p>
</div>
<div class="section" id="dfliquids">
<h2><a class="toc-backref" href="#id29">dfliquids</a></h2>
<p>A command prompt for liquid creation and manipulation (the Moses
effect included!) Also allows painting obsidian walls directly.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Spawning and deleting liquids can F up pathing data and
temperatures (creating heat traps). You've been warned.</p>
</div>
</div>
<div class="section" id="dfmode">
<h2><a class="toc-backref" href="#id30">dfmode</a></h2>
<p>This tool lets you change the game mode directly. Not all combinations are good for every situation and most of them will produce undesirable results.
There are a few good ones though.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p class="last">You are in fort game mode (0 game mode), managing your fortress (0 control mode) and paused.
You switch to the arena game mode, <em>assume control of a creature</em> and the switch to adventure game mode(1).
You just lost a fortress and gained an adventurer.</p>
</div>
<p>I take no responsibility of anything that happens as a result of using this tool :P</p>
</div>
<div class="section" id="dfpause">
<h2><a class="toc-backref" href="#id31">dfpause</a></h2>
<p>Forces DF to pause. This is useful when your FPS drops below 1 and you lose control of the game.</p>
</div>
<div class="section" id="dfposition">
<h2><a class="toc-backref" href="#id32">dfposition</a></h2>
<p>Prints the game mode, current DF window properties and cursor position in both local and world coordinates.</p>
</div>
<div class="section" id="dfprobe">
<h2><a class="toc-backref" href="#id33">dfprobe</a></h2>
<p>Can be used to determine tile properties like temperature.</p>
</div>
<div class="section" id="dfprospector">
<h2><a class="toc-backref" href="#id34">dfprospector</a></h2>
<p>Lists all available minerals on the map and how much of them there is.</p>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id35">Options:</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-a</span></kbd></td>
<td>processes all tiles, even hidden ones.</td></tr>
</tbody>
</table>
<p>On windows, it's possible to run dfprospector-all.bat to process all the tiles without messing with terminal windows.
Also on Windos, dfprospector-text.bat will print the output into a file and then show it in a notepad program (whatever opens .txt by default).</p>
</div>
</div>
<div class="section" id="dfreveal">
<h2><a class="toc-backref" href="#id36">dfreveal</a></h2>
<p>Reveals the whole map, waits for input and hides it again. If you close
the tool while it waits, the map remains revealed.</p>
</div>
<div class="section" id="dfunreveal">
<h2><a class="toc-backref" href="#id37">dfunreveal</a></h2>
<p>Hides everything and then only reveals the part of the map accessible from the position of DF's cursor. Place the cursor in open space that you want to keep revealed - this should include the surface world.
Can be used to fix maps stuck revealed or hide parts of the fortress blocked off by walls.</p>
</div>
<div class="section" id="dfsuspend">
<h2><a class="toc-backref" href="#id38">dfsuspend</a></h2>
<p>Test of the process suspend/resume mechanism. If this doesn't work as expected, it's not safe to use DFHack.</p>
</div>
<div class="section" id="dftubefill">
<h2><a class="toc-backref" href="#id39">dftubefill</a></h2>
<p>Fills all the 'candy stores' with 'delicious candy'. No need to fear the clowns. Don't use if you haven't seen the hidden fun stuff
yet ;)</p>
</div>
<div class="section" id="dfunstuck">
<h2><a class="toc-backref" href="#id40">dfunstuck</a></h2>
<p>Use if you prematurely close any of the tools and DF appears to be stuck. Mostly only needed on Windows.</p>
</div>
<div class="section" id="dfvdig">
<h2><a class="toc-backref" href="#id41">dfvdig</a></h2>
<p>Designates a whole vein for digging. Point the cursor at a vein and run this thing :)
Running 'dfXvdig' on Windows or using the '-x' parameter will dig stairs between z-levels to follow the veins.</p>
</div>
<div class="section" id="dfveinlook">
<h2><a class="toc-backref" href="#id42">dfveinlook</a></h2>
<p>Simplistic map viewer. Mostly a debug/development thing. Now supported on Windows too!</p>
</div>
<div class="section" id="dfweather">
<h2><a class="toc-backref" href="#id43">dfweather</a></h2>
<p>Lets you change the current weather to 'clear sky', 'rainy' or 'snowing'. Fill those ponds without mucking around with dfliquids
:D Rain can also stop brush fires.</p>
</div>
<div class="section" id="your-tool-here">
<h2><a class="toc-backref" href="#id44">Your tool here</a></h2>
<p>Write one ;)</p>
</div>
</div>
</div>
</body>
</html>
